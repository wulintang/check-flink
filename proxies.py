import re

# 你的原始IP列表
ip_list = """2409:8c60:2500::/48
2602:fa80:10::/48
2602:ffe4:c18::/48
2602:ffe4:0c02:1001::/64
2404:a140:3a:1::/64
240d:c040:1::/48
240d:c010::/28
240e:960:200::/48
2408:874c:1ff::/48
2409:8c38:80::/48
240e:f7:a070::/48
240e:cd:ff00::/48
240e:c2:1800::/48
240e:bf:b800::/48
240e:97d:2000::/48
240e:97d:10:25e7::/64
240e:97d:10:25de::/64
240e:97c:3a::/48
240e:979:f07::/48
240e:978:d04::/48
240e:978:2903::/48
240e:965:802::/48
240e:964:5002::/48
240e:960:200:90::/60
240e:940:20c:308::/64
240e:925:2::/48
2409:8c70:3a91::/48
2409:8c5c:110::/48
2409:8c54:8b0:430::/62
2409:8c54:810::/48
2409:8c54:2030::/48
2409:8c54:1821:578::/64
2409:8c50:a00::/48
2409:8c44:b00:4ec::/64
2409:8c38:80:1f1::/48
2409:8c34:e00::/48
2409:8c28:2808::/48
2409:8c28:203::/48
2409:8c20:9c71::/48
2409:8c20:1834::/48
2409:8c0c:310::/48
2409:8702:489c::/48
2408:8770::/48
2408:8766:0:101c::/48
2408:8764:22:1f::/48
2408:875c::/48
2408:8756:f09::/48
2408:8756:d0fb:170::/64
2408:8756:d0fb:16c::/64
2408:8756:4cff::/48
2408:8756:2cff::/48
2408:8752:e00::/48
2408:874d:a00::/48
2408:874c:1ff:80::/60
2408:8748:a102::/48
2408:8740:d1fe::/48
2408:873d:2011::/48
2408:873c:5811:ae::/64
2408:873c:5811:a3::/64
2408:873c:5811:78::/64
2408:873c:5011::/48
2408:8726:1001::/48
2408:8706:2::/48
2402:4e00:c050::/48
2402:4e00:c031:7fe::/64
2402:4e00:c031:7fd::/64
2402:4e00:c010::/48
2402:4e00:37::/48
49.232.206.124-49.232.206.124
221.178.3.0-221.178.3.255
125.39.190.0-125.39.190.255
123.150.77.0-123.150.77.255
111.33.186.0-111.33.186.255
101.33.222.0-101.33.222.255
49.51.64.0-49.51.64.255
43.159.4.0-43.159.4.255
43.175.0.0-43.175.255.255
43.174.0.0-43.174.255.255
43.159.64.0-43.159.127.255
43.152.128.0-43.152.191.255
43.152.0.0-43.152.63.255
43.132.64.0-43.132.95.255
38.60.181.0-38.60.181.255
23.236.104.0-23.236.104.255
211.152.154.0-211.152.154.255
211.152.148.0-211.152.148.255
211.152.132.0-211.152.132.255
203.205.221.0-203.205.221.255
203.205.220.0-203.205.220.255
203.205.191.0-203.205.191.255
203.205.136.0-203.205.139.255
156.229.29.0-156.229.29.255
156.227.203.0-156.227.203.255
150.109.88.0-150.109.91.255
150.109.223.0-150.109.223.255
150.109.222.0-150.109.222.255
150.109.192.0-150.109.192.255
150.109.191.0-150.109.191.255
150.109.190.0-150.109.190.255
129.227.213.0-129.227.213.255
101.33.0.0-101.33.31.255
117.163.50.0-117.163.50.255
116.153.74.0-116.153.74.255
117.21.29.0-117.21.29.255
218.87.12.0-218.87.12.255
119.91.175.0-119.91.175.255
81.71.192.0-81.71.193.255
61.240.216.0-61.240.216.255
59.55.136.0-59.55.143.255
58.251.87.0-58.251.87.255
58.251.127.0-58.251.127.255
58.250.127.0-58.250.127.255
58.217.176.0-58.217.179.255
58.212.47.0-58.212.47.255
58.144.195.0-58.144.195.255
43.145.44.0-43.145.45.255
43.145.16.0-43.145.19.255
43.141.9.0-43.141.9.255
43.141.50.0-43.141.50.255
43.141.132.0-43.141.132.255
43.141.110.0-43.141.110.255
43.141.11.0-43.141.11.255
43.141.109.0-43.141.109.255
43.141.10.0-43.141.10.255
43.137.88.0-43.137.91.255
42.81.252.0-42.81.252.255
36.250.8.0-36.250.8.255
36.250.5.0-36.250.5.255
36.250.238.0-36.250.238.255
36.250.235.0-36.250.235.255
36.248.57.0-36.248.57.255
36.159.70.0-36.159.70.255
36.158.253.0-36.158.253.255
36.158.202.0-36.158.202.255
36.150.103.0-36.150.103.255
27.44.206.0-27.44.206.255
223.109.210.0-223.109.210.255
223.109.2.0-223.109.2.255
223.109.0.0-223.109.1.255
222.94.224.0-222.94.225.255
222.79.126.0-222.79.126.255
222.79.116.0-222.79.117.255
222.189.172.0-222.189.172.255
221.5.96.0-221.5.97.255
221.204.26.0-221.204.27.255
219.144.90.0-219.144.90.255
219.144.88.0-219.144.89.255
211.97.84.0-211.97.84.255
183.61.174.0-183.61.174.255
183.56.148.0-183.56.148.255
183.214.154.0-183.214.154.255
183.201.110.0-183.201.110.255
183.201.109.0-183.201.109.255
183.131.59.0-183.131.59.255
180.213.52.0-180.213.52.255
163.177.43.0-163.177.43.255
157.148.125.0-157.148.125.255
157.148.124.0-157.148.124.255
14.116.245.0-14.116.245.255
125.94.248.0-125.94.249.255
125.94.246.0-125.94.247.255
125.39.1.0-125.39.1.255
124.72.128.0-124.72.128.255
123.182.162.0-123.182.162.255
123.138.25.0-123.138.25.255
123.125.3.0-123.125.3.255
122.246.30.0-122.246.31.255
122.246.0.0-122.246.0.255
122.192.132.0-122.192.132.255
120.240.94.0-120.240.94.255
120.240.100.0-120.240.100.255
120.233.97.0-120.233.97.255
120.233.43.0-120.233.43.255
120.232.97.0-120.232.97.255
120.232.158.0-120.232.158.255
120.232.149.0-120.232.149.255
120.232.126.0-120.232.126.255
120.226.27.0-120.226.27.255
120.226.145.0-120.226.145.255
120.226.144.0-120.226.144.255
117.85.64.0-117.85.67.255
117.44.72.0-117.44.79.255
117.40.80.0-117.40.87.255
117.163.59.0-117.163.59.255
117.162.56.0-117.162.63.255
117.162.48.0-117.162.55.255
117.147.231.0-117.147.231.255
117.147.230.0-117.147.230.255
117.147.229.0-117.147.229.255
116.169.184.0-116.169.184.255
116.163.46.0-116.163.46.255
116.162.152.0-116.162.153.255
116.162.123.0-116.162.123.255
116.162.122.0-116.162.122.255
116.153.80.0-116.153.87.255
115.150.39.0-115.150.39.255
114.66.250.0-114.66.250.255
114.66.246.0-114.66.247.255
113.99.138.0-113.99.138.255
113.240.96.0-113.240.96.255
113.240.91.0-113.240.91.255
113.240.66.0-113.240.66.255
113.219.228.0-113.219.231.255
113.219.202.0-113.219.203.255
113.201.154.0-113.201.154.255
113.200.123.0-113.200.123.255
113.194.51.0-113.194.51.255
112.90.154.0-112.90.154.255
112.84.131.0-112.84.131.255
112.49.69.0-112.49.69.255
112.49.30.0-112.49.31.255
112.13.210.0-112.13.210.255
111.6.218.0-111.6.218.255
111.6.217.0-111.6.217.255
111.32.204.0-111.32.205.255
111.31.238.0-111.31.238.255
111.20.30.0-111.20.30.255
111.20.28.0-111.20.29.255
101.71.105.0-101.71.105.255
101.71.100.0-101.71.101.255
101.33.195.0-101.33.195.255
1.71.146.0-1.71.147.255"""

def generate_proxies():
    # 分离IPv6和IPv4地址
    ipv6_pattern = re.compile(r'^[0-9a-fA-F:]+/[0-9]+$')
    ipv4_range_pattern = re.compile(r'^(\d+\.\d+\.\d+\.\d+)-(\d+\.\d+\.\d+\.\d+)$')
    
    proxies = []
    
    for line in ip_list.splitlines():
        line = line.strip()
        if not line:
            continue
            
        # 处理IPv6地址
        if ipv6_pattern.match(line):
            # 对于IPv6，我们使用前半部分作为代理IP示例
            ip = line.split('/')[0]
            # 简化IPv6地址，取前64位
            if '::' in ip:
                ip_parts = ip.split('::')
                if len(ip_parts) > 0 and ip_parts[0]:
                    base_ip = ip_parts[0]
                else:
                    base_ip = ip
            else:
                base_ip = ip
                
            # 生成一个示例IP
            example_ip = f"{base_ip}::1"
            proxies.append(f"https://[{example_ip}]")
            proxies.append(f"http://[{example_ip}]")
        
        # 处理IPv4地址范围
        elif ipv4_range_pattern.match(line):
            start_ip, end_ip = line.split('-')
            # 对于单个IP
            if start_ip == end_ip:
                proxies.append(f"http://{start_ip}")
                proxies.append(f"https://{start_ip}")
            else:
                # 对于IP范围，取起始IP作为示例
                proxies.append(f"http://{start_ip}")
                proxies.append(f"https://{start_ip}")
    
    # 去重并保存到文件
    unique_proxies = list(set(proxies))
    
    with open('proxies.txt', 'w', encoding='utf-8') as f:
        for proxy in unique_proxies:
            f.write(f"{proxy}\n")
    
    print(f"已生成proxies.txt，共{len(unique_proxies)}个代理")

if __name__ == "__main__":
    generate_proxies()
    
